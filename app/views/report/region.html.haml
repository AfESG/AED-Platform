%h1 #{@year} Regional Totals for #{@region}
%a{:href=>'/report'}Reports

&gt;

%a{:href=>"/report/#{@species.gsub(' ','_')}"} #{@species}

&gt;

%a{:href=>"/report/#{@species.gsub(' ','_')}/#{@year}"} #{@year}

&gt;

%a{:href=>"/report/#{@species.gsub(' ','_')}/#{@year}/#{@continent}"} #{@continent}

&gt;

#{@region}

%div{:style=>'margin-top: 20px'}

- if @summary_totals_by_region.num_tuples > 0
  %h2{:style => 'margin-top:20px'} #{@year} Summary Totals for #{@region}

  %table{:style => 'font-size:16px'}
    %tr
      %th{:width => '40%'} Data Category
      %th.numeric{:width => '15%'} Definite
      %th.numeric{:width => '15%'} Probable
      %th.numeric{:width => '15%'} Possible
      %th.numeric{:width => '15%'} Speculative
    -@summary_totals_by_region.each do |row|
      %tr{:style => 'height: 24px'}
        %td= row['SURVEYTYPE']
        %td.numeric= number_with_delimiter row['DEFINITE']
        %td.numeric= number_with_delimiter row['PROBABLE']
        %td.numeric= number_with_delimiter row['POSSIBLE']
        %td.numeric= number_with_delimiter row['SPECUL']
    -@summary_sums_by_region.each do |row|
      %tr.totals{:style => 'height: 24px; font-weight: bold'}
        %td Totals #{@year}
        %td.numeric= number_with_delimiter row['DEFINITE']
        %td.numeric= number_with_delimiter row['PROBABLE']
        %td.numeric= number_with_delimiter row['POSSIBLE']
        %td.numeric= number_with_delimiter row['SPECUL']

-unless @countries.nil?
  -@countries.each do |row|
    %div
      %a{:href=>"#{@region.gsub(' ','_')}/#{row['CNTRYNAME'].gsub(' ','_')}"} #{row['CNTRYNAME']}


